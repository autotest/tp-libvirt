- virtual_disks.throttlefilters:
    type = virtual_disks_throttlefilters
    start_vm = no
    func_supported_since_libvirt_ver = (11, 8, 0)
    target_disk = "vdb"
    disk_image_format = "raw"
    throttlefilter_group1 = "limitVDB"
    throttlefilter_group2 = "limitVM"
    dd_count = "500M"
    write_threshold = "400"
    discard_threshold = "200"
    throttle_options = "--total-bytes-sec 10000000 --read_iops_sec 400000 --write_iops_sec 100000"
    check_qemu_pattern = '"throttle-group":"throttle-${throttlefilter_group1}".*"discard":"unmap".*"throttle-group":"throttle-${throttlefilter_group2}".*"discard":"unmap"'
    variants:
        - start_vm:
    variants:
        - file_disk:
            disk_type = "file"
            disk_size = "1G"
            disk_dict = {'target': {'dev': '${target_disk}', 'bus': 'virtio'}, 'throttlefilters': {'throttlefilter': [{'group': '${throttlefilter_group1}'}, {'group': '${throttlefilter_group2}'}]}, 'type_name': '${disk_type}', 'driver': {'name': 'qemu', 'type': '${disk_image_format}', 'discard': 'unmap'}, 'device': 'disk'}
        - rbd_with_auth_disk:
            disk_type = "rbd_with_auth"
            rbd_image_size = "1G"
            mon_host = "EXAMPLE_MON_HOST"
            auth_key = "EXAMPLE_AUTH_KEY"
            auth_user = "EXAMPLE_AUTH_USER"
            client_name = "EXAMPLE_CLIENT_NAME"
            private_key_password = "EXAMPLE_PWD"
            server_user = "root"
            image_path = "virtual_disk_throttle/filter.img"
            sec_dict = {"secret_ephemeral": "no", "secret_private": "yes", "description": "secret_desc_for_throttle group", "usage": "ceph", "usage_name": "cephlibvirt"}
            disk_dict = {'target': {'dev': '${target_disk}', 'bus': 'virtio'}, 'throttlefilters': {'throttlefilter': [{'group': '${throttlefilter_group1}'}, {'group': '${throttlefilter_group2}'}]}, 'type_name': 'network', 'driver': {'name': 'qemu', 'type': '${disk_image_format}', 'discard': 'unmap'}}

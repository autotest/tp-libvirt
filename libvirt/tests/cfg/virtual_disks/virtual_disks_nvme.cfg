- virtual_disks.nvme:
    type = virtual_disks_nvme
    take_regular_screendumps = "no"
    start_vm = "no"
    type_name = "nvme"
    driver_type = "raw"
    device_type = "disk"
    target_dev = "vdb"
    target_bus = "virtio"
    status_error = "no"
    define_error = "no"
    pkgs_host = "pciutils"
    variants:
        - attach_nvme:
            with_attach_detach = "yes"
            source_attrs = "{'type':'pci', 'managed':'yes', 'namespace':'1', 'index':'1'}"
        - blockcopy_nvme:
            only coldplug
            disk_type = "file"
            nvme_disk_type = "block"
            with_blockcopy = "yes"
            driver_type = "qcow2"
            func_supported_since_libvirt_ver = (6, 3, 0)
            disk_dict = {"type_name":"%s", "device": "disk", "target":{"dev": "${target_dev}", "bus": "virtio"}, "driver": {"name": "qemu", "type": "${driver_type}"}}
            source_attrs = "{'type':'pci', 'managed':'yes', 'namespace':'1', 'index':'1'}"
            blockcopy_common_options = "--transient-job --verbose --wait"
            variants:
                - finish:
                    blockcopy_option = "--finish"
                - pivot:
                    blockcopy_option = "--pivot"
            variants:
                - without_luks:
                    luks_sec_dict = {"source": {"attrs": {"dev": "%s"}}}
                - with_luks:
                    with_luks = "yes"
                    sec_volume = "luks"
                    luks_secret_passwd = "redhat"
                    luks_extra_parameter = "--object secret,data=${luks_secret_passwd},id=sec0 -o encrypt.format=luks,encrypt.key-secret=sec0"
                    luks_sec_dict = {"source": {"attrs": {"dev": "%s"}, "encryption": {"attrs": {"format": "luks"}, "encryption": "luks", "secret": {"type": "passphrase", "usage": "${sec_volume}"}}}}
    variants:
        - coldplug:
            virt_device_hotplug = "no"
        - hotplug:
            virt_device_hotplug = "yes"

- virtual_network.lifecycle.lifecycle_full_xml_interface:
    type = lifecycle_full_xml_interface
    start_vm = no
    take_regular_screendumps = no
    vm_attrs = {"vcpu": 8}
    login_timeout = 240
    ping_target = "www.google.com"
    mtu = 9000
    driver_queues = 4
    queues_flag = "multi_queue"
    variants test_scenario:
        - network:
            iface_type = "network"
            new_network = 'new_network'
            bridge_name = "virbr1"
            dev = "test1"
            basic_config = {'type_name': 'network', 'source': {'network': '${new_network}'}, 'target': {'dev': '${dev}'}, 'model': 'virtio'}
            network_dict = {'name': '${new_network}', 'forward': {'mode': 'nat'}, 'bridge': {'name': '${bridge_name}', 'stp': 'on', 'delay': '0'}, 'ips': [{'address': '10.0.0.1', 'netmask': '255.255.255.0', 'dhcp_ranges': {'attrs': {'start': '10.0.0.2', 'end': '10.0.0.254'}}}], 'mtu': '${mtu}', 'bandwidth_inbound': {'average': '100', 'peak': '500', 'burst': '512'}, 'bandwidth_outbound': {'average': '128', 'peak': '256', 'burst': '256'}}
            basic_xpath = "//interface[@type='network'],//interface/source[@network='${new_network}'],//interface/target[@dev='test1'],//interface/model[@type='virtio']"
            check_dev = "${dev}"
            network_features = {'port': {'isolated': 'yes'}, "link_state": "up", 'mtu': {'size': '${mtu}'}, 'coalesce': {'max': '7'}, 'acpi': {'index': '1'}}
            driver_port_xpath = "//interface/port[@isolated='yes'],"
            coalesce_xpath = "//interface/coalesce/rx/frames[@max='7'],"
            mtu_xpath = ",//interface/mtu[@size='${mtu}']"
        - linux_bridge:
            iface_type = "bridge"
            bridge_name = "br0"
            dev = "vnet0"
            basic_config = {'type_name': 'bridge', 'source': {'bridge': '${bridge_name}'}, 'target': {'dev': '${dev}'}, 'model': 'virtio'}
            basic_xpath = "//interface[@type='${iface_type}'],//interface/source[@bridge='${bridge_name}'],//interface/model[@type='virtio']"
            check_dev = "${dev}"
            network_features = {'port': {'isolated': 'yes'}, "link_state": "up", 'mtu': {'size': '${mtu}'}, 'coalesce': {'max': '7'}, 'acpi': {'index': '1'}}
            driver_port_xpath = "//interface/port[@isolated='yes'],"
            coalesce_xpath = "//interface/coalesce/rx/frames[@max='7'],"
            mtu_xpath = ",//interface/mtu[@size='${mtu}']"
        - ethernet:
            iface_type = "ethernet"
            bridge_name = "virbr0"
            basic_config = {'type_name': 'ethernet', 'target': {'dev': 'mytap0', 'managed': 'no'}, 'model': 'virtio'}
            tap_name = "mytap0"
            basic_xpath = "//interface[@type='${iface_type}'],//interface/target[@dev='${tap_name}'],//interface/target[@managed='no'],//interface/model[@type='virtio']"
            check_dev = "${tap_name}"
            network_features = {"link_state": "up", 'mtu': {'size': '${mtu}'}, 'acpi': {'index': '1'}}
            driver_port_xpath = ''
            coalesce_xpath = ""
            mtu_xpath = ",//interface/mtu[@size='${mtu}']"
        - direct_bridge:
            iface_type = "direct"
            mode_type = "bridge"
            dev = "tap"
            basic_config = {'type_name': 'direct', 'source': {'dev': '%s', 'mode': '${mode_type}'}, 'target': {'dev': '${dev}'},'model': 'virtio'}
            basic_xpath = "//interface[@type='${iface_type}'],//interface/source[@dev='%s'],//interface/source[@mode='${mode_type}'],//interface/model[@type='virtio']"
            check_dev = "${dev}"
            network_features = {"link_state": "up", 'acpi': {'index': '1'}}
            driver_port_xpath = ""
            coalesce_xpath = ""
            mtu_xpath = ""
    driver_config = {'tune': {'sndbuf': 1600}, 'driver':{"driver_attr":{'name': 'vhost', 'txmode': 'iothread', 'ioeventfd': 'on', 'event_idx': 'off', 'queues': '${driver_queues}', 'rss': 'on', 'rss_hash_report': 'on', 'packed': 'on', 'rx_queue_size': '256', 'tx_queue_size': '256', 'iommu': 'on', 'ats': 'on'},'driver_host': {'csum': 'off', 'gso': 'off', 'tso4': 'off', 'tso6': 'off', 'ecn': 'off', 'ufo': 'off', 'mrg_rxbuf': 'off'}, 'driver_guest': {'csum': 'off', 'tso4': 'off', 'tso6': 'off', 'ecn': 'off', 'ufo': 'off'}}
    bandwidth_alias = {'bandwidth': {'inbound': {'average': '100', 'peak': '500', 'burst': '512'}, 'outbound': {'average': '128', 'peak': '256', 'burst': '256'}}, 'alias': {'name': 'ua-821c72de-b42d-4318-ae6c-88f27bca6708'}}}
    iface_dict = {**${basic_config}, **${driver_config}, **${network_features}, **${bandwidth_alias}}
    driver_xpath = "//interface/tune/sndbuf,//interface/driver[@name='vhost'],//interface/driver[@queues='${driver_queues}'],//interface/driver[@txmode='iothread'],//interface/driver/host[@csum='off'],//interface/driver/guest[@csum='off']"
    features_xpath = "${driver_port_xpath}//interface/link[@state='up'],${coalesce_xpath}//interface/acpi[@index='1'] ${mtu_xpath}"
    bandwidth_xpath = "//interface/bandwidth/inbound[@average='100'],//interface/bandwidth/inbound[@peak='500'],//interface/bandwidth/outbound[@average='128'],//interface/bandwidth/outbound[@peak='256'],//interface/alias[@name='ua-821c72de-b42d-4318-ae6c-88f27bca6708']"
    xpath_checks = "${basic_xpath},${driver_xpath},${features_xpath},${bandwidth_xpath}"

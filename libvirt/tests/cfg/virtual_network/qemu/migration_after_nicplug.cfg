- virtual_network.qemu_test.migration_after_nicplug:
    type = migration_after_nicplug
    create_vm_libvirt = "yes"
    kill_vm_libvirt = "yes"
    start_vm = "yes"
    take_regular_screendumps = no
    nfs_mount_dir = "/var/lib/libvirt/migrate"
    nfs_mount_options = "soft,timeo=50,retrans=3"
    virsh_migrate_dest_state = running
    virsh_migrate_options = " --live --p2p --verbose"
    virsh_migrate_connect_uri = "qemu:///system"
    migration_setup = "yes"
    ssh_remote_auth = True
    mnt_path_name = ${nfs_mount_dir}
    nfs_server_ip = "${migrate_source_host}"
    migrate_desturi_port = "22"
    migrate_desturi_type = "ssh"
    virsh_migrate_desturi = "qemu+ssh://${migrate_dest_host}/system"
    login_timeout = "360"
    migrate_vm_back = "yes"
    migration_type = "precopy"
    virsh_migrate_extra = ""
    vm_ping_outside = pass
    outside_ip = "8.8.8.8"
    ovmf:
        kill_vm_libvirt_options = " --nvram"
    variants:
        - nic_virtio:
            pci_model = virtio-net-pci
            s390x:
                pci_model = virtio-net-ccw
        - nic_e1000e:
            only i386, x86_64
            pci_model = e1000e
        - nic_8139:
            only i386, x86_64
            only Host_RHEL.m6 Host_RHEL.m7 Host_RHEL.m8 Host_RHEL.m9
            no q35
            pci_model = rtl8139
        - nic_igb:
            only q35
            only x86_64
            required_qemu = [8.0.0, )
            pci_model = igb
    variants test_case:
        - after_nichotplug:
        - after_nichotunplug:
            nics = nic1
            nic_model_nic1 = ${pci_model}
            pcie_extra_root_port = 0

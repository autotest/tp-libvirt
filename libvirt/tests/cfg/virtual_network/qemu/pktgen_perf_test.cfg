- virtual_network.qemu_test.pktgen_perf_test:
    type = pktgen_burst_mode_test
    no Windows
    only virtio_net
    no Host_RHEL.m5, Host_RHEL.m6
    vm_ping_host = "pass"
    pkg_dir = "tx rx"
    pktgen_script = "pktgen_sample01_simple pktgen_sample03_burst_single_flow pktgen_sample05_flow_per_thread"
    pktgen_threads = 1
    pkt_size = 64
    burst = 1
    pktgen_test_timeout = 30
    record_list = pkt_size run_threads burst mpps
    guest_ver_cmd = "uname -r"
    kvm_ver_chk_cmd = "rpm -qa qemu-kvm-rhev qemu-kvm"
    libvirt_ver_chk_cmd = "rpm -q libvirt"
    test_vm = no
    flush_firewall_rules_cmd = "iptables -F ; nft flush ruleset"
    queues_nic1 = "8"
    create_vm_libvirt = "yes"
    kill_vm_libvirt = "yes"
    ovmf:
        kill_vm_libvirt_options = " --nvram"
    master_images_clone = img1
    remove_image_image1 = yes

    variants:
        - @default:
        - vhost_vdpa:
            # Run pktgen perf test with vhost-vdpa interface.
            # Default intent is VM <-> external host traffic testing.
            dev_type = "vdpa"
            driver_queues = 9
            vm_iface_driver = "virtio_net"
            mac_addr = "52:54:00:00:00:00"
            iface_dict = {'model': 'virtio', 'source': {'dev': '/dev/vhost-vdpa-0'}, 'type_name': 'vdpa', 'driver': {'driver_attr': {'queues': '${driver_queues}'}}, 'mac_address': mac_addr}
            vm_attrs = {'vcpu': 10, 'current_vcpu': 10}
            # Please modify the commented-out example values below
            # client = ip
            # username_client = your_username
            # password_client = your_password
            # shell_port_client = 22
            # shell_client_client = ssh
            # shell_prompt_client = [$#%]
            # client_pktgen_iface = ethX       # external host iface used by pktgen
            # pktgen_tx_dst_mac = xx:xx:xx:xx:xx:xx

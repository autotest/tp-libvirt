- virtual_network.qemu_test.msi_and_irq:
    only virtio_net
    type = msi_and_irq
    create_vm_libvirt = yes
    kill_vm_libvirt = yes
    master_images_clone = image1
    remove_image_image1 = yes
    filesize = 4000
    file_md5_check_timeout = 600
    dd_cmd = "dd if=/dev/zero of=%s bs=1M count=${filesize}"
    ovmf:
        kill_vm_libvirt_options = " --nvram"
    Linux:
        tmp_dir = "/var/tmp/"
        delete_cmd = "rm -rf %s"
        lspci_cmd = "lspci |grep Eth |awk {'print $1'}"
        msi_cmd = "lspci -vvv -s %s|grep MSI-X"
    Windows:
        cdroms += " winutils"
        cdrom_winutils = isos/windows/winutils.iso
        get_irq_cmd = '%sdevcon.exe resources @"%s" | find "IRQ"'
        tmp_dir = "C:\\"
        delete_cmd = "del /f %s"
        msi_cmd = "reg add "HKLM\System\CurrentControlSet\Enum\%s\Device Parameters\Interrupt Management\MessageSignaledInterruptProperties" /v MSISupported /d %d /t REG_DWORD /f"
        i386:
            devcon_folder = "WIN_UTILS:\devcon\x86\"
        x86_64:
            devcon_folder = "WIN_UTILS:\devcon\amd64\"
    variants:
        - disable_msi_on_linux:
            only Linux
            disable_pci_msi = no
        - disable_msi_on_win:
            only Windows
            variants:
                - with_netkvm:
                    driver_name = netkvm
                    driver_verifier = ${driver_name}
                    Win2016, Win2019, Win8..1, Win2012..r2:
                        driver_verifier += " ndis"
                    device_type = "virtio-net-pci"
                    device_hwid = '"PCI\VEN_1AF4&DEV_1000" "PCI\VEN_1AF4&DEV_1041"'
                    device_name = "Red Hat VirtIO Ethernet Adapter"

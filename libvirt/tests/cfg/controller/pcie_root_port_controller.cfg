- pcie_root_port_controller:
    type = pcie_root_port_controller
    start_vm = "no"
    controller_model = "pcie-root-port"
    controller_target = '{"chassis":1,"port":"0x8"}'
    variants:
        - positive_test:
            status_error = "no"
            variants:
                - controllers_different_chassis_same_port:
                    second_controller_model = "pcie-root-port"
                    second_controller_target = "{'chassis':2,'port':'0x8'}"
        - negative_test:
            status_error = "yes"
            variants:
                - device_slot_invalid:
                    test_define_only = "yes"
                    interface_slot = "a"
                    minimal_interface_dict = '{"source": {"network": "default"}}'
                    failure_message = "Invalid value for attribute 'slot' in element 'address': 'a'. Expected .*integer value"
                - device_slot_wrong_number:
                    test_define_only = "yes"
                    interface_slot_type = "hex"
                    interface_slot = 1
                    minimal_interface_dict = '{"source": {"network": "default"}}'
                    failure_message = "Invalid PCI address .* slot must be <= 0"
                - controllers_same_chassis_same_port:
                    second_controller_model = "pcie-root-port"
                    second_controller_target = "{'chassis':1,'port':'0x8'}"
                - controllers_same_chassis_different_port:
                    second_controller_model = "pcie-root-port"
                    second_controller_target = "{'chassis':1,'port':'0x4'}"
                - model_name_invalid:
                    test_define_only = "yes"
                    controller_model = "dmi-to-pci-bridge"
                - index_equals_address_bus:
                    test_define_only = "yes"
                    controller_address = '{"type": "pci", "domain": "0x0000", "bus": "0x01", "slot": "0x1", "function":"0x0"}'
                    failure_message = ".*The device at PCI address .* cannot be plugged into the PCI controller with index='.*'. It requires a controller that accepts a pcie\-root\-port.*"
                - index_less_than_address_bus:
                    bus_offset = 1
                    test_define_only = "yes"
                    controller_address = '{"type": "pci", "domain": "0x0000", "bus": "0x02", "slot": "0x1", "function":"0x0"}'
                    failure_message = ".*a PCI slot is needed to connect a PCI controller model='pcie\-root\-port', but none is available, and it cannot be automatically added.*"
                - controller_index_zero:
                    test_define_only = "yes"
                    controller_index = 0
                    failure_message = "XML error: Multiple 'pci' controllers with index '0'"
                - controller_index_too_high:
                    test_define_only = "yes"
                    controller_index = 256
                    failure_message = "internal error: a PCI slot is needed to connect a PCI controller model='pcie\-root\-port', but none is available, and it cannot be automatically added"
                - controller_index_invalid:
                    test_define_only = "yes"
                    controller_index = xxx
                    failure_message = "Invalid value for attribute 'index' in element 'controller': 'xxx'. Expected integer value|internal error: Cannot parse controller index xxx"

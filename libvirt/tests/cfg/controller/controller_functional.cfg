- controller.functional:
    type = controller_functional
    start_vm = no
    setup_controller = "yes"
    variants:
        - machine_i440fx:
            os_machine = 'pc'
        - machine_pseries:
            os_machine = 'pseries'
        - machine_q35:
            os_machine = 'q35'
    variants:
        - positive_tests:
            remove_address = "yes"
            variants:
                - pci_bridge_auto_add:
                    only machine_i440fx
                    controller_type = pci
                    controller_model = pci-bridge
                    remove_address = "no"
                    setup_controller = "no"
                    variants:
                        - no_pci_controller:
                            no_pci_controller = "yes"
                            controller_model = pci-root
                        - pci_bus_number_larger_zero:
                            pci_bus_number = 3
                        - gap_between_pciroot_pcibridge:
                            controller_index = 7
                            setup_controller = "yes"
                        - gap_between_pcicontroller_index:
                            controller_index = 3
                            controller_index_second = 5
                - pci_root:
                    only machine_i440fx
                    controller_type = pci
                    controller_model = pci-root
                    controller_pcihole64 = 1024
                - pcie_root:
                    only machine_q35
                    controller_type = pci
                    controller_model = pcie-root
                    controller_pcihole64 = 1024
                - virtio_serial:
                    controller_type = virtio-serial
                    controller_vectors = '1'
                - virtio_serial_0_vectors:
                    controller_type = virtio-serial
                    controller_vectors = '0'
                - usb_controller:
                    only machine_q35
                    controller_type = usb
                    usb_controller_address = 00:08.2
                    variants:
                        - master_ehci:
                            controller_model = ehci
                        - master_ich9-ehci1:
                            controller_model = ich9-ehci1
                    variants:
                        - ich9-uhci1:
                            usb_controller = ich9-uhci1
                        - ich9-uhci2:
                            usb_controller = ich9-uhci2
                        - ich9-uhci3:
                            usb_controller = ich9-uhci3
                    variants:
                        - auto_addr:
                        - manual_addr:
                            controller_address = 00:09.1
        - negative_tests:
            variants:
                - invalid_index:
                    controller_type = pci
                    controller_model = pci-bridge
                    controller_index = -1

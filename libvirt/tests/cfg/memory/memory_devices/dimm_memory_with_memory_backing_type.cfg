- memory.devices.dimm.memory_backing_type:
    type = dimm_memory_with_memory_backing_type
    no s390-virtio
    start_vm = no
    consume_value = 204800
    source_dict = ""
    cpu_mem_attrs = "'vcpu': 4, 'memory_unit':'KiB','memory':2097152,'current_mem':2097152,'current_mem_unit':'KiB'"
    numa_attrs = "'cpu': {'numa_cell': [{'id': '0', 'cpus': '0-1', 'memory': '1048576', 'unit': 'KiB'}, {'id': '1', 'cpus': '2-3', 'memory': '1048576', 'unit': 'KiB'}]}"
    max_mem_attrs = "'max_mem_rt': 10485760, 'max_mem_rt_slots': 16, 'max_mem_rt_unit': 'KiB'"
    hugepage_memory = 4194304
    dimm_list = [{'mem_model':'dimm', 'target':{'size':524288, 'size_unit':'KiB', 'node':0}}, {'mem_model':'dimm', 'source':{'pagesize':%d, 'pagesize_unit':'KiB'}, 'target':{'size':524288, 'size_unit':'KiB', 'node':0}}, {'mem_model':'dimm', 'target':{'size':524288, 'size_unit':'KiB', 'node':1}}, {'mem_model':'dimm', 'source':{'pagesize':%d, 'pagesize_unit':'KiB'}, 'target':{'size':524288, 'size_unit':'KiB', 'node':1}}]
    exp_prealloc_list = ['true', 'true', 'true', 'true']
    dimm1_path = {"return": "/dev/hugepages/libvirt/qemu/"}
    dimm3_path = {"return": "/dev/hugepages/libvirt/qemu/"}
    dimm1_type = {"return": "memory-backend-file"}
    dimm3_type = {"return": "memory-backend-file"}
    variants:
        - file:
            source_type = "file"
            source_dict = "'source_type':'${source_type}',"
            dimm0_type = {"return": "memory-backend-file"}
            dimm2_type = {"return": "memory-backend-file"}
            ondemand, immediate_with_threads:
                dimm0_path = {"return": "/var/lib/libvirt/qemu/ram/"}
                dimm2_path = {"return": "/var/lib/libvirt/qemu/ram/"}
            hugepage_nodeset:
                dimm0_path = {"return": "/dev/hugepages/libvirt/qemu/"}
                dimm2_path = {"return": "/var/lib/libvirt/qemu/ram/"}
            hugepage:
                dimm0_path = {"return": "/dev/hugepages/libvirt/qemu/"}
                dimm2_path = {"return": "/dev/hugepages/libvirt/qemu/"}
        - anonymous:
            no hugepage,hugepage_nodeset
            source_type = "anonymous"
            source_dict = "'source_type':'${source_type}',"
            ondemand, immediate_with_threads:
                dimm0_type = {"return": "memory-backend-ram"}
                dimm2_type = {"return": "memory-backend-ram"}
                dimm0_path = {"error": {"desc": "memory-backend-ram.mem-path"}}
                dimm2_path = {"error": {"desc": "memory-backend-ram.mem-path"}}
        - memfd:
            source_type = "memfd"
            source_dict = "'source_type':'${source_type}',"
            dimm0_path = {"error": {"desc": "memory-backend-memfd.mem-path"}}
            dimm1_path = ${dimm0_path}
            dimm2_path = ${dimm0_path}
            dimm3_path = ${dimm0_path}
            dimm0_type = {"return": "memory-backend-memfd"}
            dimm1_type = ${dimm0_type}
            dimm2_type = ${dimm0_type}
            dimm3_type = ${dimm0_type}
        - undefined:
            source_dict = ""
            ondemand, immediate_with_threads:
                dimm0_type = {"return": "memory-backend-ram"}
                dimm2_type = {"return": "memory-backend-ram"}
                dimm0_path = {"error": {"desc": "memory-backend-ram.mem-path"}}
                dimm2_path = {"error": {"desc": "memory-backend-ram.mem-path"}}
            hugepage_nodeset:
                dimm0_type = {"return": "memory-backend-file"}
                dimm2_type = {"return": "memory-backend-ram"}
                dimm0_path = {"return": "/dev/hugepages/libvirt/qemu/"}
                dimm2_path = {"error": {"desc": "memory-backend-ram.mem-path"}}
            hugepage:
                dimm0_type = {"return": "memory-backend-file"}
                dimm2_type = {"return": "memory-backend-file"}
                dimm0_path = {"return": "/dev/hugepages/libvirt/qemu/"}
                dimm2_path = {"return": "/dev/hugepages/libvirt/qemu/"}
    variants alloc_mode:
        - ondemand:
            mode = "ondemand"
            alloc_dict = "'allocation':{{'mode':'${mode}'}}"
            exp_prealloc_list =['false', 'true', 'false', 'true']
        - immediate_with_threads:
            func_supported_since_libvirt_ver = (8, 2, 0)
            mode = "immediate"
            threads = 4
            alloc_dict = "'allocation':{{'mode':'${mode}', 'threads':${threads}}}"
            dimm0_threads = {"return": ${threads}}
            dimm1_threads = ${dimm0_threads}
            dimm2_threads = ${dimm0_threads}
            dimm3_threads = ${dimm0_threads}
            exp_threads_list = [${dimm0_threads}, ${dimm1_threads}, ${dimm2_threads}, ${dimm3_threads}]
        - hugepage_nodeset:
            mode = "immediate"
            threads = 4
            hugepage_memory = 4194304
            alloc_dict = "'allocation':{{'mode':'${mode}', 'threads':${threads}}}, 'hugepages':{{'pages': [{{'unit': 'KiB', 'nodeset': '0', 'size': '{0}'}}]}}"
            dimm0_threads = {"return": ${threads}}
            dimm1_threads = ${dimm0_threads}
            dimm2_threads = ${dimm0_threads}
            dimm3_threads = ${dimm0_threads}
            exp_threads_list = [${dimm0_threads}, ${dimm1_threads}, ${dimm2_threads}, ${dimm3_threads}]
        - hugepage:
            hugepage_memory = 4194304
            alloc_dict = "'hugepages':{{'pages': [{{'unit': 'KiB', 'size': '{0}'}}]}}"
    variants plug_type:
        - cold_plug:
            plug_option = "--config"
        - hot_plug:
            plug_option = ""
    memory_backing_dict = {{'mb':{{${source_dict} ${alloc_dict}}}}}
    vm_attrs = {${cpu_mem_attrs}, ${numa_attrs}, ${max_mem_attrs}}
    preallocated_cmd = "info memdev"
    preallocated_cmd_protocal = "--hmp"
    preallocated_pattern = "memory backend: (\w*dimm\w*).*?prealloc: (true|false)"
    property_type = "type"
    exp_type_list = [${dimm0_type}, ${dimm1_type}, ${dimm2_type}, ${dimm3_type}]
    property_mempath = "mem-path"
    exp_mempath_list = [${dimm0_path}, ${dimm1_path}, ${dimm2_path}, ${dimm3_path}]
    property_threads = "prealloc-threads"
    qom_cmd_template = '{{"execute":"qom-get", "arguments":{{"path":"/objects/{0}", "property":"{1}"}}}}'


- memory.devices.nvdimm.memory_backing_type:
    type = nvdimm_memory_with_memory_backing_type
    no s390-virtio
    start_vm = no
    nvdimm_num = 4
    nvdimm_size = 524288
    nvdimm_path = "/tmp/nvdimm{}"
    nvdimm_dict = {{'mem_model':'nvdimm', 'source': {{'path': '{}'{}}}, 'target':{{'size':${nvdimm_size}, 'size_unit':'KiB', 'node':{}}}}}
    nvdimm_source_map = {{1: ", 'pagesize': {}, 'pagesize_unit':'KiB'"}}
    nvdimm_node_map = {0: 0, 1: 0, 2: 1, 3: 1}
    nvdimm_device = "/dev/pmem{}"
    nvdimm_mount_point = "/mnt/pmem{}"
    nvdimm_file = "/mnt/pmem{}/file{}"
    file_content = "test_text"
    hugepage_memory = 4194304
    source_dict = ""
    cpu_mem_attrs = "'vcpu': 4, 'memory_unit':'KiB','memory':2097152,'current_mem':2097152,'current_mem_unit':'KiB'"
    numa_attrs = "'cpu': {'numa_cell': [{'id': '0', 'cpus': '0-1', 'memory': '1048576', 'unit': 'KiB'}, {'id': '1', 'cpus': '2-3', 'memory': '1048576', 'unit': 'KiB'}]}"
    max_mem_attrs = "'max_mem_rt': 10485760, 'max_mem_rt_slots': 16, 'max_mem_rt_unit': 'KiB'"
    exp_prealloc = "true"
    exp_type = "memory-backend-file"
    variants:
        - file:
            source_type = "file"
            source_dict = "'source_type':'${source_type}',"
        - anonymous:
            no hugepage,hugepage_nodeset
            source_type = "anonymous"
            source_dict = "'source_type':'${source_type}',"
        - memfd:
            source_type = "memfd"
            source_dict = "'source_type':'${source_type}',"
        - undefined:
            source_dict = ""
    variants alloc_mode:
        - ondemand:
            mode = "ondemand"
            alloc_dict = "'allocation':{{'mode':'${mode}'}}"
        - immediate_with_threads:
            func_supported_since_libvirt_ver = (8, 2, 0)
            mode = "immediate"
            threads = 8
            alloc_dict = "'allocation':{{'mode':'${mode}', 'threads':${threads}}}"
        - hugepage_nodeset:
            mode = "immediate"
            threads = 8
            alloc_dict = "'allocation':{{'mode':'${mode}', 'threads':${threads}}}, 'hugepages':{{'pages': [{{'unit': 'KiB', 'nodeset': '0', 'size': '{0}'}}]}}"
        - hugepage:
            alloc_dict = "'hugepages':{{'pages': [{{'unit': 'KiB', 'size': '{0}'}}]}}"
    variants operation:
        - define_nvdimm:
            plug_option = "--config"
            init_nvdimms_id_range = 0-3
        - hot_plug_nvdimm:
            plug_option = ""
            init_nvdimms_id_range = 0
            hotplug_nvdimms_id_range = 1-3
    memory_backing_dict = {{'mb':{{${source_dict} ${alloc_dict}}}}}
    vm_attrs = {${cpu_mem_attrs}, ${numa_attrs}, ${max_mem_attrs}}
    preallocated_cmd = "info memdev"
    preallocated_cmd_protocal = "--hmp"
    preallocated_pattern = "memory backend: (\w*nvdimm\w*).*?prealloc: (true|false)"
    property_type = "type"
    property_mempath = "mem-path"
    property_threads = "prealloc-threads"
    qom_cmd_template = '{{"execute":"qom-get", "arguments":{{"path":"/objects/{0}", "property":"{1}"}}}}'


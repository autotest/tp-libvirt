- virsh.migrate_set_get_speed:
    type = virsh_migrate_set_get_speed
    kill_vm_before_test = "yes"
    kill_vm_on_error = "no"
    variants:
        - normal_test:
            status_error = "no"
            variants:
                - zero:
                    bandwidth = zero
                - one:
                    bandwidth = one
                - default:
                    bandwidth = default
                - uint32_max:
                    bandwidth = UINT32_MAX
                - int64_max:
                    bandwidth = INT64_MAX
        - error_test:
            status_error = "yes"
            variants:
                - space_option:
                    bandwidth = "''"
                - no_option:
                    bandwidth = ""
                - invalid_option:
                    bandwidth = INVALID_VALUE
                - negone:
                    bandwidth = negative
                - additional_option:
                    options_extra = "xzy"
                - uint64_max:
                    bandwidth = UINT64_MAX
        - verify_speed_with_migration:
            status_error = "no"
            bandwidth = 8
            # Migrate twice between two hosts with setting speed
            # Verify two speed by spent time
            twice_migration = "yes"
            migrate_dest_uri = "qemu+ssh://${remote_ip}/system"
            migrate_src_uri = "qemu+ssh://${local_ip}/system"
            thread_timeout = 240
            # Allowed delta between two time of migration
            # Migration may be disturbed by environment
            allowed_delta = 0.2
            # Add load vms accroding your need
            load_vms = ""
            variants:
                - stress_tool:
                    # To avoid timeout because of slow speed
                    variants:
                        - stress:
                            stress_type = "stress_in_vms"
                            variants:
                                - memory:
                                    stress_start_cmd = "stress --vm 2 --vm-bytes 128M"
                                - vcpu:
                                    stress_type = "stress_in_vms"
                                    stress_start_cmd = "stress --cpu 4 --quiet"
                - load_vms:
                    stress_type = "load_vms_booting"
                - multi_vms:
                    migration_type = "simultaneous"
            variants:
                - half:
                    second_bandwidth = "half"
                - two_times:
                    second_return_bandwidth = "times"
                - no_change:
                    second_bandwidth = "same"

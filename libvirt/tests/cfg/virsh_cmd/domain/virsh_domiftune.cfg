- virsh.domiftune:
    type = virsh_domiftune
    libvirtd = "on"
    take_regular_screendumps = "no"
    check_clear = "no"
    variants:
        - positive_testing:
            status_error = "no"
            variants:
                - get_domif_parameter:
                    variants:
                        - running_guest:
                            start_vm = "yes"
                            variants:
                                - options:
                                    variants:
                                        - none:
                                        - live:
                                            options = "live"
                                        - current:
                                            options = "current"
                                        - config:
                                            options = "config"
                        - shutoff_guest:
                            start_vm = "no"
                            variants:
                                - options:
                                    variants:
                                        - none:
                                        - current:
                                            options = "current"
                - set_blkio_parameter:
                    change_parameters = "yes"
                    variants:
                        - running_guest:
                            start_vm = "yes"
                            variants:
                                - change_inbound:
                                    variants:
                                        # the parameters are 32-bit unsigned
                                        # integers and {in,out}bound is in
                                        # range of 1~ 2^32-1 (4294967295)
                                        # However, libvirt accepts a kilobyte
                                        # value and not a byte value, so we
                                        # can only get "this close" on the
                                        # boundary check.
                                        - minimum_boundary:
                                            inbound = "1,1,1"
                                        - inside_boundary:
                                            inbound = "1024,1024,1024"
                                        - maximum_boundary:
                                            inbound = "4294967,4294967,4294967"
                                    variants:
                                        - options:
                                            variants:
                                                - none:
                                                - live:
                                                    options = "live"
                                                - current:
                                                    options = "current"
                                                - config:
                                                    options = "config"
                                                - live_config:
                                                    options = "config --live"
                                - change_outbound:
                                    variants:
                                        - minimum_boundary:
                                            outbound = "1,1,1"
                                        - inside_boundary:
                                            outbound = "65535,65535,65535"
                                        - maximum_boundary:
                                            outbound = "4294967,4294967,4294967"
                                    variants:
                                        - options:
                                            variants:
                                                - none:
                                                - live:
                                                    options = "live"
                                                - current:
                                                    options = "current"
                                                - config:
                                                    options = "config"
                                                - live_config:
                                                    options = "config --live"
                                # As of libvirt 1.2.3 (commid id '14973382')
                                # setting inbound or outbound to 0 (zero) will
                                # clear the average value - let's test that.
                                - clear_inbound:
                                    check_clear = "yes"
                                    inbound = 0
                                - clear_outbound:
                                    check_clear = "yes"
                                    outbound = 0

        - negative_testing:
            status_error = "yes"
            variants:
                - get_domif_parameter:
                    variants:
                        - running_guest:
                            start_vm = "yes"
                            variants:
                                - options:
                                    variants:
                                        - none:
                                            options = "xyz"
                                        - current_live:
                                            options = "current --live"
                        - shutoff_guest:
                            start_vm = "no"
                            variants:
                                - options:
                                    variants:
                                        - none:
                                            options = "xyz"
                                        - live:
                                            options = "live"
                                        - current_config:
                                            options = "current --config"
                - set_domif_parameter:
                    change_parameters = "yes"
                    start_vm = "yes"
                    variants:
                        - change_inbound:
                            variants:
                                - invalid_average:
                                    inbound = "xyz,100,100"
                                - skip_average:
                                    inbound = ",100,100"
                                - zero_average:
                                    inbound = "0,100,100"
                                - null_inbound:
                                    inbound = " "
                            variants:
                                - options:
                                    variants:
                                        - none:
                                        - live:
                                            options = "live"
                        - change_outbound:
                            variants:
                                - invalid_average:
                                    outbound = "xyz,100,100"
                                - skip_average:
                                    outbound = ",100,100"
                                - zero_average:
                                    outbound = "0,100,100"
                                - null_outbound:
                                    outbound = " "
                            variants:
                                - options:
                                    variants:
                                        - live:
                                            options = "live"
                                        - config:
                                            options = "config"
                                        - current:
                                            options = "current"

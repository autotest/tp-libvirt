- convert_from_file:
    type = 'convert_from_file'
    vm_type = 'libvirt'
    start_vm = 'no'
    take_regular_screendumps = no
    v2v_timeout = '1200'

    # Regular kvm guest parameters
    os_type = 'linux'
    input_mode = 'libvirt'
    hypervisor = 'kvm'
    username = 'root'
    password = 'redhat'
    only source_none

    # Shell paramters
    remote_shell_client = 'ssh'
    remote_shell_port = 22
    remote_shell_prompt = '^\w:\\.*>\s*$|^\[.*\][\#\$]\s*$'
    status_test_command = 'echo $?'

    variants:
        - output_mode:
            variants:
                - libvirt:
                    only dest_libvirt
                - rhev:
                    only dest_rhev.NFS
                - local:
                    only dest_none
                    output_mode = local
                    target = ${output_mode}
    variants:
        - input_mode:
            variants:
                - disk:
                    input_mode = "disk"
                - libvirtxml:
                    input_mode = "libvirtxml"
                - ova:
                    input_mode = "ova"
                    ova_dir = /var/lib/libvirt/images/v2v/ova-images/esx-rhel6.8-ova
                    variants:
                        - normal:
                            only output_mode.libvirt,output_mode.rhev
                            variants:
                                - ova_tar:
                                    input_file = '${ova_dir}/esx-rhel6.8-ova.tar'
                                - ova_zip:
                                    input_file = '${ova_dir}/esx-rhel6.8-ova.zip'
                                - ova_pigz:
                                    input_file = '${ova_dir}/esx-rhel6.8-ova.tar.gz'
                                - ova_xz:
                                    input_file = '${ova_dir}/esx-rhel6.8-ova.tar.xz'
                                - ova_relative_path:
                                    input_file = 'esx-rhel6.8.ova'
                                    checkpoint = 'ova_relative_path'
                                - ova_abs_path:
                                    input_file = '${ova_dir}/esx-rhel6.8.ova'
                                - ova_vmdk_gz_zip:
                                    input_file = '${ova_dir}/esx-rhel6.8-vmdkgz.zip'
                                - ova_vmdk_gz_tar:
                                    input_file = '${ova_dir}/esx-rhel6.8-vmdkgz.tar'
                                - permission:
                                    only libvirt
                                    input_file = '${ova_dir}/esx-rhel6.8-ova.tar'
                                    checkpoint = permission
                                - rhel6_5:
                                    only libvirt
                                    ova_dir = /var/lib/libvirt/images/v2v/ova-images/rhel6.5-ova
                                    input_file = ${ova_dir}/esx-rhel6-ova.tar
                        - special:
                            only output_mode.libvirt
                            ova_dir = '/var/lib/libvirt/images/v2v/ova-images/ova-special'
                            variants:
                                - ova_default:
                                    skip_vm_check = yes
                                    checkpoint = "ova_default"
                                    input_file = "${ova_dir}/1164853-LPLCLDWA273_reboot.ova"
                                - parent_ctrl:
                                    checkpoint = "parent_ctrl"
                                    input_file = "${ova_dir}/test-bug1167302.ova"
                                - win2008r2_ostk:
                                    checkpoint = "win2008r2_ostk"
                                    input_file = "${ova_dir}/1161333-WPLCLDWA170_no_mcafee.ova"
                                    image_to_match = "${ova_dir}/BSOD"
                                    v2v_timeout = 1800
                        - parse:
                            only output_mode.local
                            ova_dir = /var/lib/libvirt/images/v2v/ova-images/case84967 
                            skip_check = yes
                            variants:
                                - SHA1:
                                    ova_file = SHA1.ova
                                - SHA256:
                                    ova_file = SHA256.ova
                                - SHA1_SHA256:
                                    ova_file = SHA1_SHA256.ova
                                - invalid_line_in_manifest:
                                    ova_file = invalid_line_in_manifest.ova
                                    msg_content = 'virt-v2v: warning: unable to parse line from manifest file'
                                    expect_msg = no
                                - invalid_line_in_manifest_missing_space:
                                    ova_file = invalid_line_in_manifest-missing_space.ova
                            input_file = ${ova_dir}/${ova_file}
                        - aws:
                            only output_mode.rhev
                            ova_dir = /var/lib/libvirt/images/v2v/ova-images/bug1401077
                            variants:
                                - rhel7_2:
                                    ova_file = rhel7.2-aws
                                - win2008r2:
                                    ova_file = win2008r2-aws
                                    os_version = win2008r2
                                - ec2:
                                    ova_file = rhel6-ec2.ova
                                - Eaton:
                                    ova_file = centos-Eaton.ova
                                    skip_vm_check = yes
                            input_file = ${ova_dir}/${ova_file}

    variants:
        - positive_test:
            status_error = 'no'
            variants:
                - linux:
                    only ova
                    no win2008r2_ostk,aws.win2008r2
                - windows:
                    os_type = 'windows'
                    shutdown_command = 'shutdown /s /f /t 0'
                    reboot_command = 'shutdown /r /f /t 0'
                    status_test_command = 'echo %errorlevel%'
                    shell_prompt = '^\w:\\.*>\s*$'
                    shell_linesep = '\r\n'
                    shell_client = 'nc'
                    shell_port = 10022
                    file_transfer_client = 'rss'
                    file_transfer_port = 10023
                    redirs += ' file_transfer'
                    guest_port_remote_shell = 10022
                    guest_port_file_transfer = 10023
                    rtc_base = 'localtime'
                    network_query = 'ipconfig /all'
                    restart_network = 'ipconfig /renew'
                    vm_user = 'Administrator'
                    vm_pwd = '123qweP'
                    only win2008r2_ostk,aws.win2008r2
